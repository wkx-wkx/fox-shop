!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).VueTinymce={})}(this,function(t){"use strict";const e=["INIT","INPUT","CHANGED"];var n=function(t,e,n,o,i,s,r,d,a,c){"boolean"!=typeof r&&(a=d,d=r,r=!1);var u,h="function"==typeof n?n.options:n;if(t&&t.render&&(h.render=t.render,h.staticRenderFns=t.staticRenderFns,h._compiled=!0,i&&(h.functional=!0)),o&&(h._scopeId=o),s?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,a(t)),t&&t._registeredComponents&&t._registeredComponents.add(s)},h._ssrRegister=u):e&&(u=r?function(){e.call(this,c(this.$root.$options.shadowRoot))}:function(t){e.call(this,d(t))}),u)if(h.functional){var f=h.render;h.render=function(t,e){return u.call(e),f(t,e)}}else{var p=h.beforeCreate;h.beforeCreate=p?[].concat(p,u):[u]}return n}({},void 0,{name:"VueTinymce",model:{prop:"content",event:"change"},props:{content:{type:[String,Object],default:""},setup:{type:Function,default:function(){}},disabled:{type:Boolean,default:!1},setting:{type:Object,default:function(){return{}}},debug:Boolean},render(t){return"undefined"==typeof tinymce?t("div","tinymce is undefined"):t("div",{attrs:{id:this.id}})},data:()=>({id:"vue-tinymce-"+Date.now()+Math.floor(1e3*Math.random()),editor:null,status:0,backup:""}),watch:{content(t,e){if(this.changedLog({type:"propsChanged"},this.status,t,"--"),1!==this.status&&this.editor&&this.editor.initialized)return null===t?this.resetContent(""):void this.setContent(t)},disabled(t){this.editor.setMode(t?"readonly":"design")}},created(){if(this.changedLog=(t=>t?(console.warn("`@packy-tang/vue-tinymce`进入debug模式"),(t,n,o,i)=>console.log("来自：%s | 状态：%s \n %s \n %s",t.type,e[n],o,i)):()=>!1)(this.debug),"undefined"==typeof tinymce)throw new Error("tinymce undefined")},beforeMount(){const t=Object.assign({},this.setting,{selector:"#"+this.id,setup:t=>{this.setup(t),t.on("init",()=>{this.setContent(this.content,t),t.on("keyup input",t=>{this.status=1}),t.on("SetContent",e=>{this.status=1,this.changedLog(e,this.status,t.getContent(),"--")}),t.on("Blur",e=>{this.status=0,this.changedLog(e,this.status,t.getContent(),"--")}),t.on("input keyup Change Undo Redo ExecCommand NodeChange",e=>{this.onChanged(e,t)})})}});this.editor=tinymce.createEditor(t.selector,t)},mounted(){this.editor.targetElm=this.$el,this.editor.render()},updated(){this.editor.render()},beforeDestroy:function(){this.editor.remove()},methods:{setContent(t,e){return e||(e=this.editor),e.setContent(t)},resetContent(t,e){if(e||(e=this.editor),e.resetContent)return e.resetContent(t);e.setContent(t),e.setDirty(!1),e.undoManager.clear()},onChanged(t,e){e||(e=this.editor);const n=e.getContent();this.changedLog(t,this.status,n,"--"),this.$emit("change",n)}}},void 0,void 0,void 0,void 0,void 0);var o=new class{constructor(){const{prefix:t}={prefix:""};this.prefix=t}install(t,e={}){const o=e.prefix||this.prefix,i={VueTinymce:n};Object.keys(i).forEach(e=>{const n=i[e];t.component(o+n.name,n)})}};t.VueTinymce=n,t.default=o,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=vue-tinymce.umd.js.map
