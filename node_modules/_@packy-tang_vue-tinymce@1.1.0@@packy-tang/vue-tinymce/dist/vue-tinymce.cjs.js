"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const INIT=0,INPUT=1,status=["INIT","INPUT","CHANGED"],changedLog=e=>e?(console.warn("`@packy-tang/vue-tinymce`进入debug模式"),(e,t,n,i)=>console.log("来自：%s | 状态：%s \n %s \n %s",e.type,status[t],n,i)):()=>!1;var script={name:"VueTinymce",model:{prop:"content",event:"change"},props:{content:{type:[String,Object],default:""},setup:{type:Function,default:function(){}},disabled:{type:Boolean,default:!1},setting:{type:Object,default:function(){return{}}},debug:Boolean},render(e){return"undefined"==typeof tinymce?e("div","tinymce is undefined"):e("div",{attrs:{id:this.id}})},data:()=>({id:"vue-tinymce-"+Date.now()+Math.floor(1e3*Math.random()),editor:null,status:0,backup:""}),watch:{content(e,t){if(this.changedLog({type:"propsChanged"},this.status,e,"--"),1!==this.status&&this.editor&&this.editor.initialized)return null===e?this.resetContent(""):void this.setContent(e)},disabled(e){this.editor.setMode(e?"readonly":"design")}},created(){if(this.changedLog=changedLog(this.debug),"undefined"==typeof tinymce)throw new Error("tinymce undefined")},beforeMount(){const e=Object.assign({},this.setting,{selector:"#"+this.id,setup:e=>{this.setup(e),e.on("init",()=>{this.setContent(this.content,e),e.on("keyup input",e=>{this.status=1}),e.on("SetContent",t=>{this.status=1,this.changedLog(t,this.status,e.getContent(),"--")}),e.on("Blur",t=>{this.status=0,this.changedLog(t,this.status,e.getContent(),"--")}),e.on("input keyup Change Undo Redo ExecCommand NodeChange",t=>{this.onChanged(t,e)})})}});this.editor=tinymce.createEditor(e.selector,e)},mounted(){this.editor.targetElm=this.$el,this.editor.render()},updated(){this.editor.render()},beforeDestroy:function(){this.editor.remove()},methods:{setContent(e,t){return t||(t=this.editor),t.setContent(e)},resetContent(e,t){if(t||(t=this.editor),t.resetContent)return t.resetContent(e);t.setContent(e),t.setDirty(!1),t.undoManager.clear()},onChanged(e,t){t||(t=this.editor);const n=t.getContent();this.changedLog(e,this.status,n,"--"),this.$emit("change",n)}}};function normalizeComponent(e,t,n,i,o,s,r,d,a,c){"boolean"!=typeof r&&(a=d,d=r,r=!1);var u,h="function"==typeof n?n.options:n;if(e&&e.render&&(h.render=e.render,h.staticRenderFns=e.staticRenderFns,h._compiled=!0,o&&(h.functional=!0)),i&&(h._scopeId=i),s?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},h._ssrRegister=u):t&&(u=r?function(){t.call(this,c(this.$root.$options.shadowRoot))}:function(e){t.call(this,d(e))}),u)if(h.functional){var p=h.render;h.render=function(e,t){return u.call(t),p(e,t)}}else{var _=h.beforeCreate;h.beforeCreate=_?[].concat(_,u):[u]}return n}var normalizeComponent_1=normalizeComponent;const __vue_script__=script,__vue_inject_styles__=void 0,__vue_scope_id__=void 0,__vue_module_identifier__=void 0,__vue_is_functional_template__=void 0;var VueTinymce=normalizeComponent_1({},void 0,__vue_script__,void 0,void 0,void 0,void 0,void 0);class VuePlugin{constructor(){const{prefix:e}={prefix:""};this.prefix=e}install(e,t={}){const n=t.prefix||this.prefix,i={VueTinymce:VueTinymce};Object.keys(i).forEach(t=>{const o=i[t];e.component(n+o.name,o)})}}var main=new VuePlugin;exports.VueTinymce=VueTinymce,exports.default=main;
//# sourceMappingURL=vue-tinymce.cjs.js.map
